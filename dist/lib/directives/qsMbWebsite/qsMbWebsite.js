define(["jquery","underscore","qvangular","text!./qsMbWebsite.ng.html"],function($,_,qvangular,ngTemplate){"use strict";qvangular.directive("qsMbWebsite",["$sce",function($sce){return{restrict:"E",template:ngTemplate,scope:{objectId:"=",websiteSource:"=",websiteInteraction:"=",websiteScrollBehavior:"=",editMode:"="},controller:function($scope){$scope.trustedSource=""},link:function($scope,$element){$element.find("iframe");$scope.$watchCollection("[websiteSource, websiteInteraction, websiteScrollBehavior, editMode]",function(){render()});var render=function(){switch($scope.trustedSource=_.isEmpty($scope.websiteSource)?"":$sce.trustAsResourceUrl($scope.websiteSource),$scope.websiteScrollBehavior){case"auto":$scope.iframeScrolling="auto";break;case"none":$scope.iframeScrolling="no";break;case"on":$scope.iframeScrolling="yes";break;default:$scope.iframeScrolling="no"}$scope.websiteInteraction||($scope.iframeScrolling="no"),$scope.showOverlay=!$scope.websiteInteraction,1==$scope.editMode&&($scope.showOverlay=!0);var $ifrPlaceHolder=$element.find(".iframePlaceHolder");$ifrPlaceHolder.empty();var $ifr=$(document.createElement("iframe"));$ifr.id="mediabox"+$scope.objectId+"_website",$ifr.attr("src",$scope.trustedSource),$ifr.attr("frameborder",0),$ifr.attr("scrolling",$scope.iframeScrolling),$ifr.attr("sandbox","allow-forms allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation"),$ifr.addClass("mb_website"),$ifrPlaceHolder.append($ifr)};render()}}}])});