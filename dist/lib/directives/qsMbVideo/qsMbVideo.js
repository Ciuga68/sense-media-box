define(["qvangular","./../../js/extensionUtils","text!./qsMbVideo.ng.html","text!./videojs.min.css","./videojs.min","./plugins/vjs.vimeo.min"],function(qvangular,extensionUtils,ngTemplate,videojsCss){"use strict";qvangular.directive("qsMbVideo",function(){return extensionUtils.addStyleToHeader(videojsCss),{restrict:"E",template:ngTemplate,scope:{objectId:"=",videoType:"=",videoSourceMp4:"=",videoSourceVimeo:"=",videoPoster:"="},link:function($scope){function getSource(){switch($scope.videoType){case"video/mp4":return $scope.videoSourceMp4;default:return""}}function getTechOrder(){switch($scope.videoType){case"video/mp4":return["html5"];default:return["html5"]}}function configVideo(){var options={techOrder:getTechOrder(),controls:!0,autoplay:!1,preload:"auto",poster:$scope.videoPoster},videoSource=getSource();videoSource&&(player?player.src({type:$scope.videoType,src:getSource()}):player=videojs("myVideo",options,function(){var mPlayer=this;mPlayer.src({type:$scope.videoType,src:getSource()})}))}var player;$scope.$on("$destroy",function(){player&&player.dispose()}),$scope.$watchCollection("[videoType, videoSourceMP4, videoSourceVimeo]",function(){configVideo()})}}})});